# Nuxt.js Login App with Supabase Integration
[![Nuxt.js](https://img.shields.io/badge/Nuxt.js-04C690?style=flat-square&logo=nuxt.js)](https://nuxtjs.org/)
[![Supabase](https://img.shields.io/badge/Supabase-1E4C5C?style=flat-square&logo=supabase)](https://supabase.io/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=flat-square&logo=tailwind-css)](https://tailwindcss.com/)
[![PrimeVue](https://img.shields.io/badge/PrimeVue-42A97A?style=flat-square&logo=primevue)](https://primefaces.org/primevue/)

This is a simple login app created with Nuxt.js, Prime Vue, Tailwind, and Supabase. It serves as a template or guide for building a minimal authentication system with server-side rendering (SSR).  



## Features

- User authentication with regular and admin roles.
- Server and client route protection.
- Supabase integration for user data storage.
- Token verification for email confirmation upon sign-up.
- Dynamic theming based on the system theme (light/dark).

## Setup

1. Clone the repository:

   ```bash
   git clone https://github.com/prxncxss03/nuxt-auth-supabase-template.git
   ```

2. Install dependencies:

   ```bash
     npm install
   ```
3. Set up environment variables:

   ```bash
     SUPABASE_URL=<URL>
     SUPABASE_KEY=<anon key>
     BASE_URL=http://localhost:3000
   ```
4. Run the app:
    ```bash
       npm run dev
     ```
Visit http://localhost:3000 in your browser to see the app in action.

## Supabase Tables
### Users Table

```sql
create table public.users (
  id bigint generated always as identity,
  user_id uuid not null,
  user_type text null,
  created_at timestamp with time zone null default (now() at time zone 'utc'::text),
  name text not null default ''::text,
  constraint users_pkey primary key (id),
  constraint users_user_id_fkey foreign key (user_id) references auth.users (id),
  constraint users_name_check check ((length(name) < 300)),
  constraint users_user_type_check check (
    (
      user_type = any (array['regular'::text, 'admin'::text])
    )
  )
) tablespace pg_default;
```
### Sessions Table 
Just stores their data when logging in.
```sql
create table public.sessions (
  user_id uuid not null,
  created_at timestamp with time zone not null default (now() at time zone 'utc'::text),
  id bigint generated by default as identity,
  constraint sessions_pkey primary key (id),
  constraint sessions_id_key unique (id),
  constraint sessions_user_id_fkey foreign key (user_id) references auth.users (id) on update cascade on delete cascade
) tablespace pg_default;
```
When it comes to queries, Supabase AI is incredibly helpful. You can simply type in what you need.

## Usage
- Regular users: After login, a greeting and a logout button are displayed.  
- Admin users: A table shows user IDs and the number of logins.
- Email Confirmation: Clicking the confirmation email redirects to a confirmation page.
- Theme: The app dynamically changes based on the system theme.

## License
This project is licensed under the [MIT](https://opensource.org/licenses/MIT) License.

## Notes
This app was developed as an assignment for an upcoming OJT. It's a great starting point for building more complex applications with Nuxt.js and Supabase.

Feel free to customize and extend the app according to your needs!
